<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Updated Category Combination Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 30px 0;
    }
    .section {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .old-behavior {
      border-left: 4px solid #dc3545;
    }
    .new-behavior {
      border-left: 4px solid #28a745;
    }
    h2 {
      margin-top: 0;
      padding-bottom: 10px;
      border-bottom: 2px solid #ddd;
    }
    .old-behavior h2 {
      color: #dc3545;
    }
    .new-behavior h2 {
      color: #28a745;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    th {
      background: #f8f9fa;
      font-weight: bold;
    }
    .highlight {
      background: #fff3cd;
    }
    .combined {
      background: #d4edda;
      font-weight: bold;
    }
    .info-box {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #0066cc;
    }
    .scope-box {
      background: #e7f3ff;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      border: 2px solid #0066cc;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 0.9em;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.85em;
      font-weight: bold;
      margin-left: 10px;
    }
    .badge-old {
      background: #dc3545;
      color: white;
    }
    .badge-new {
      background: #28a745;
      color: white;
    }
    ul {
      margin: 10px 0;
    }
    li {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <h1>üìä Updated Category Combination Feature</h1>
  
  <div class="info-box">
    <h3>Changes Summary</h3>
    <ol>
      <li><strong>No Value Summing:</strong> Individual entries keep their original values, only labels are renamed</li>
      <li><strong>Toolbox Only:</strong> Category combination now applies only to the "GovEx Tool Box" dataset</li>
      <li><strong>Charts Unchanged:</strong> "GovEx Most Used Charts" dataset is not affected</li>
    </ol>
  </div>

  <h2 style="text-align: center; margin: 40px 0 20px 0;">Behavior Comparison</h2>

  <div class="comparison">
    <div class="section old-behavior">
      <h2>‚ùå Old Behavior <span class="badge badge-old">BEFORE</span></h2>
      <h3>Toolbox Dataset</h3>
      <p><strong>Input:</strong></p>
      <table>
        <tr>
          <th>Label</th>
          <th>Value</th>
        </tr>
        <tr class="highlight">
          <td>claude</td>
          <td>10</td>
        </tr>
        <tr class="highlight">
          <td>github copilot</td>
          <td>15</td>
        </tr>
        <tr class="highlight">
          <td>chatGPT or other AI interface</td>
          <td>20</td>
        </tr>
      </table>
      
      <p><strong>Output (Summed):</strong></p>
      <table>
        <tr>
          <th>Label</th>
          <th>Value</th>
        </tr>
        <tr class="combined">
          <td>AI Generated</td>
          <td>45</td>
        </tr>
      </table>
      
      <p style="margin-top: 15px; color: #dc3545;">
        <strong>Issue:</strong> Values were summed (10+15+20=45)<br>
        <strong>Result:</strong> Lost individual data points
      </p>
    </div>

    <div class="section new-behavior">
      <h2>‚úÖ New Behavior <span class="badge badge-new">AFTER</span></h2>
      <h3>Toolbox Dataset</h3>
      <p><strong>Input:</strong></p>
      <table>
        <tr>
          <th>Label</th>
          <th>Value</th>
        </tr>
        <tr class="highlight">
          <td>claude</td>
          <td>10</td>
        </tr>
        <tr class="highlight">
          <td>github copilot</td>
          <td>15</td>
        </tr>
        <tr class="highlight">
          <td>chatGPT or other AI interface</td>
          <td>20</td>
        </tr>
      </table>
      
      <p><strong>Output (Labels Renamed):</strong></p>
      <table>
        <tr>
          <th>Label</th>
          <th>Value</th>
        </tr>
        <tr class="combined">
          <td>AI Generated</td>
          <td>10</td>
        </tr>
        <tr class="combined">
          <td>AI Generated</td>
          <td>15</td>
        </tr>
        <tr class="combined">
          <td>AI Generated</td>
          <td>20</td>
        </tr>
      </table>
      
      <p style="margin-top: 15px; color: #28a745;">
        <strong>Benefit:</strong> Values preserved separately<br>
        <strong>Result:</strong> All data points retained in chart
      </p>
    </div>
  </div>

  <div class="scope-box">
    <h3>üéØ Scope Change: Toolbox Only</h3>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
      <div>
        <h4>‚úÖ Applies To:</h4>
        <ul>
          <li><strong>GovEx Tool Box</strong> dataset</li>
          <li>Labels are renamed to combined categories</li>
          <li>Values preserved individually</li>
        </ul>
      </div>
      <div>
        <h4>‚ùå Does NOT Apply To:</h4>
        <ul>
          <li><strong>GovEx Most Used Charts</strong> dataset</li>
          <li>All labels remain exactly as in CSV</li>
          <li>No category combination performed</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="section" style="margin-top: 30px;">
    <h2>Complete Example with All Categories</h2>
    
    <h3>Toolbox Dataset Transformation</h3>
    
    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: start;">
      <div>
        <h4>Input (CSV Data)</h4>
        <table>
          <tr><th>Label</th><th>Value</th></tr>
          <tr class="highlight"><td>claude</td><td>10</td></tr>
          <tr class="highlight"><td>github copilot</td><td>15</td></tr>
          <tr class="highlight"><td>chatGPT or other AI interface</td><td>20</td></tr>
          <tr><td>Excel</td><td>30</td></tr>
          <tr class="highlight"><td>paint</td><td>5</td></tr>
          <tr class="highlight"><td>yarn</td><td>3</td></tr>
          <tr class="highlight"><td>thread</td><td>2</td></tr>
          <tr class="highlight"><td>fabric</td><td>4</td></tr>
          <tr class="highlight"><td>plastic</td><td>6</td></tr>
          <tr class="highlight"><td>stone</td><td>8</td></tr>
          <tr class="highlight"><td>clay, or some other physical medium</td><td>7</td></tr>
          <tr><td>Tableau</td><td>25</td></tr>
        </table>
        <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
          12 items total
        </p>
      </div>
      
      <div style="font-size: 36px; color: #28a745; text-align: center; padding-top: 100px;">
        ‚ûú
      </div>
      
      <div>
        <h4>Output (Chart Display)</h4>
        <table>
          <tr><th>Label</th><th>Value</th></tr>
          <tr class="combined"><td>AI Generated</td><td>10</td></tr>
          <tr class="combined"><td>AI Generated</td><td>15</td></tr>
          <tr class="combined"><td>AI Generated</td><td>20</td></tr>
          <tr><td>Excel</td><td>30</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>5</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>3</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>2</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>4</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>6</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>8</td></tr>
          <tr class="combined"><td>Physical Medium</td><td>7</td></tr>
          <tr><td>Tableau</td><td>25</td></tr>
        </table>
        <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
          12 items total (same count)
        </p>
      </div>
    </div>
  </div>

  <div class="info-box" style="margin-top: 30px;">
    <h3>üìù Technical Implementation</h3>
    <p>Changed in <code>src/App.svelte</code>:</p>
    <ul>
      <li><strong>combineCategories() function:</strong> Now uses <code>.map()</code> instead of aggregation logic</li>
      <li><strong>loadData() function:</strong> Only applies <code>combineCategories()</code> to toolbox data</li>
      <li><strong>Chart rendering:</strong> D3 will show multiple bars with the same label name</li>
    </ul>
  </div>

  <div class="section" style="margin-top: 30px; text-align: center;">
    <h3>Application Screenshot</h3>
    <img src="https://github.com/user-attachments/assets/8ec9a849-6913-4bb6-83df-d62a965aa51d" 
         alt="GovEx Data Visualization Application" 
         style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; margin-top: 15px;">
    <p style="margin-top: 10px; color: #666; font-size: 0.9em;">
      The application with sample data (when Google Sheets URLs are unavailable)
    </p>
  </div>
</body>
</html>
